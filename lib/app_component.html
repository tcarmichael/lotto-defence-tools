<h1>SP Optimizer</h1>

<material-expansionpanel name="Profile"
    cancelText="Clear"
    (cancel)="clearProfile()"
    (save)="saveProfile()">
    <profile [profile]="profile"></profile>
</material-expansionpanel>

<material-expansionpanel name="Environment"
    cancelText="Load"
    [secondaryText]="selectedEnvironment"
    (cancel)="showLoadDialog = true"
    (save)="showSaveDialog = true">
    <environment
        [env]="env"></environment>
</material-expansionpanel>

<material-expansionpanel name="Specialties" [showSaveCancel]="false">
    <specialties
        [specialtyList]="sp"></specialties>
</material-expansionpanel>

<material-expansionpanel name="Specialties" *ngIf="newSp != null" [showSaveCancel]="false">
    <specialties
        [specialtyList]="newSp"></specialties>
</material-expansionpanel>

<material-button raised (trigger)="optimize()">Optimize!</material-button>

<modal [(visible)]="showSaveDialog">
    <material-dialog headered>
        <h1 header>Save Environment Configuration</h1>

        <div background="red">
            <material-select focusList>
                <material-select-item *ngFor="let config of environmentService.keys"
                    focusItem
                    (trigger)="selectedEnvironment = config"
                    [selected]="selectedEnvironment == config">
                    {{config}}
                    <material-button
                        icon
                        (trigger)="deleteEnvironment(config)">
                        <material-icon baseline icon="delete" size="large"></material-icon>
                    </material-button>
                </material-select-item>
            </material-select>
        </div>

        <div footer>
            <material-input label="Configuration name"
                required
                [(ngModel)]="selectedEnvironment"></material-input>

            <material-yes-no-buttons
                saveCancel
                (no)="showSaveDialog = false"
                (yes)="saveEnvironment(); showSaveDialog = false"></material-yes-no-buttons>
        </div>
    </material-dialog>
</modal>

<modal [(visible)]="showLoadDialog">
    <material-dialog headered>
        <h1 header>Load Environment Configuration</h1>

        <div background="red">
            <material-select focusList>
                <material-select-item *ngFor="let config of environmentService.keys"
                    focusItem
                    (trigger)="selectedEnvironment = config"
                    [selected]="selectedEnvironment == config">
                    {{config}}
                    <material-button
                        icon
                        (trigger)="deleteEnvironment(config)">
                        <material-icon baseline icon="delete" size="large"></material-icon>
                    </material-button>
                </material-select-item>
            </material-select>
        </div>

        <div footer>
            <material-yes-no-buttons
                saveCancel
                yesText="Load"
                (no)="showLoadDialog = false"
                (yes)="loadEnvironment(); showLoadDialog = false"></material-yes-no-buttons>
        </div>
    </material-dialog>
</modal>
